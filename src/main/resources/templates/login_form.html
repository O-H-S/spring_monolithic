

<html layout:decorate="~{layout}">
<head>
  <!-- 필요한 경우 추가적인 CSS나 JS 파일을 포함합니다 -->
  <script type="text/javascript">
    // 체크박스 상태를 확인하고 조절하는 함수
    function onlyOneCheckbox(checkbox) {
      var checkboxes = document.getElementsByName('loginType')
      checkboxes.forEach((item) => {
        if (item !== checkbox) item.checked = false
      })
    }
  </script>
</head>
<div layout:fragment="content" class="container my-3">
  <form id="loginForm" th:action="@{/user/login}" method="post">

    <div th:if="${param.error}">
      <div class="alert alert-danger">
        사용자ID 또는 비밀번호를 확인해 주세요.
      </div>

    </div>
    <div class="mb-3">
      <label for="username" class="form-label">사용자ID</label>
      <input type="text" name="username" id="username" class="form-control">
    </div>
    <div class="mb-3">
      <label for="password" class="form-label">비밀번호</label>
      <input type="password" name="password" id="password" class="form-control">
    </div>


    <!-- 세션과 JWT 선택 옵션 -->
    <div class="mb-3">
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="loginType" id="session" value="session" checked>
        <label class="form-check-label" for="session">세션 방식</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="loginType" id="jwt" value="jwt">
        <label class="form-check-label" for="jwt">JWT 방식</label>
      </div>
    </div>


    <!-- 로그인 버튼 등 나머지 코드 -->
    <button type="submit" class="btn btn-primary">로그인</button>
    <a href="/oauth2/authorization/kakao"> 카카오 로그인</a>
  </form>

  <script>
    // 로그인 폼 객체
    var loginForm = document.getElementById('loginForm');
    console.log(loginForm)
    // 폼 제출 이벤트 리스너
    loginForm.addEventListener('submit', function(event) {
      // JWT 방식 라디오 버튼이 선택되어 있는지 확인
      var isJwtSelected = document.getElementById('jwt').checked;

      // JWT 방식이 선택된 경우, 폼의 action 속성을 변경
      if (isJwtSelected) {
        loginForm.setAttribute('action', '/user/api/login');
      }

    });
  </script>




</div>


</html>